{% extends "base.html" %}
{% load widget_tweaks %}
{% load i18n %}

{% block content %}
<div class="container mt-4" style="max-width: 480px;">
  <h3 class="mb-3">{% trans "Restablecer contraseña" %}</h3>

  {% if validlink %}
    <form method="post" novalidate>
      {% csrf_token %}

      {# Errores generales del form #}
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div class="mb-3">
        <label for="id_new_password1" class="form-label">{% trans "Nueva contraseña" %}</label>
        <input type="password" name="new_password1" class="form-control" id="id_new_password1" required>
        {% if form.new_password1.errors %}
          <div class="text-danger small">{{ form.new_password1.errors }}</div>
        {% endif %}
        {% if form.new_password1.help_text %}
          <div class="form-text">{{ form.new_password1.help_text|safe }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label for="id_new_password2" class="form-label">{% trans "Confirmar nueva contraseña" %}</label>
        <input type="password" name="new_password2" class="form-control" id="id_new_password2" required>
        {% if form.new_password2.errors %}
          <div class="text-danger small">{{ form.new_password2.errors }}</div>
        {% endif %}
      </div>

      <button type="submit" class="btn btn-primary w-100">{% trans "Guardar contraseña" %}</button>
    </form>
  {% else %}
    <div class="alert alert-warning">
      {% trans "El enlace para restablecer la contraseña no es válido o ya fue usado." %}
    </div>
    <a class="btn btn-secondary" href="{% url 'core:password_reset' %}">
      {% trans "Solicitar un nuevo enlace" %}
    </a>
  {% endif %}
</div>
{% endblock %}
